name: Deployment

on: repository_dispatch

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          ref: main
          submodules: true
      # - name: Initialize and update submodules
      #   run: |
      #     # 初始化子模块
      #     git submodule init
      #     # 更新子模块，获得最新文档
      #     git submodule update --recursive --remote
      - name: npm env
        run: npm install
        env:
          CI: true
      - name: hexo build
        run: |
          npx hexo clean
          npx hexo generate
        env:
          CI: true
      - name: Deploy
        run: |
          pwd
          ls
        
